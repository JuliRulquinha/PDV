<!-- <div class="pesquisa" style="padding:32px;">
  <div style="display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:8px;gap:16px;">
    <span style="font-weight:bold;font-size:1.5em;text-align:left;"></span>
    <div style="display:flex;align-items:center;gap:0;">
      <input type="number" min="1" class="pos-input" placeholder="Qtd" [(ngModel)]="quantidadeProduto" style="margin-top:8px;width:80px;" />
      <input type="text" class="pos-input" placeholder="Código do produto" [(ngModel)]="codigoProduto" style="width:220px;border:none;box-shadow:none;outline:none;" />
      <span style="margin-left:-32px;cursor:pointer;" (click)="adicionarProduto()">
        <i class="material-icons" style="font-family:'Material Icons';font-style:normal;font-weight:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased;">search</i>
      </span>
    </div>
  </div>

  <div class="pos-container" style="padding:32px;">

    @if (products?.length > 0) {
      @if (products[products.length - 1] as lastProduct) {
        
        <div style="display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:8px;gap:16px;">
          <span style="font-weight:bold;font-size:1.5em;text-align:left;">{{ lastProduct.nome }}</span>
          <div style="display:flex;align-items:center;gap:0;">
            <input type="number" min="1" class="pos-input" placeholder="Qtd" [(ngModel)]="quantidadeProduto" style="margin-top:8px;width:80px;" />
            <input type="text" class="pos-input" placeholder="Código do produto" [(ngModel)]="codigoProduto" style="width:220px;border:none;box-shadow:none;outline:none;" />
            <span style="margin-left:-32px;cursor:pointer;" (click)="adicionarProduto()">
              <i class="material-icons" style="font-family:'Material Icons';font-style:normal;font-weight:normal;font-size:24px;line-height:1;">search</i>
            </span>
          </div>
        </div>

  
        <div style="display:flex;align-items:flex-start;gap:8px;width:100%;margin-bottom:8px;">
          <div style="display:flex;flex-direction:column;gap:0;min-width:480px;margin-right:12px;">
            <div class="pos-info-card" style="font-size:1.0875em;padding:13.92px 17.4px;min-width:530px;max-width:530px;margin-bottom:14px;">
              <strong>CÓDIGO:</strong> {{ lastProduct.id }}
            </div>

            <div style="display:flex;flex-direction:row;gap:22px;">
              <div style="width:280px;height:280px;display:flex;align-items:center;justify-content:center;background:#f9f9f9;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,0.12);margin-bottom:8px;">
                <img [src]="lastProduct.imageUrl" alt="Foto do produto" style="max-width:90%;max-height:90%;object-fit:contain;" />
              </div>

              <div style="display:flex;flex-direction:column;gap:14px;min-width:209px;">
                <div class="pos-info-card" style="font-size:1.0875em;padding:13.92px 17.4px;min-width:191px;">
                  <strong>VALOR DE CUSTO:</strong> R$ {{ lastProduct.valorCusto != null ? lastProduct.valorCusto.toFixed(2) : '-' }}
                </div>
                <div class="pos-info-card" style="font-size:1.0875em;padding:13.92px 17.4px;min-width:191px;">
                  <strong>VALOR DE VENDA:</strong> R$ {{ lastProduct.valorVenda != null ? lastProduct.valorVenda.toFixed(2) : '-' }}
                </div>
                <div class="pos-info-card" style="font-size:1.0875em;padding:13.92px 17.4px;min-width:191px;">
                  <strong>MARCA:</strong> {{ lastProduct.marca || '-' }}
                </div>
                <div class="pos-info-card" style="font-size:1.0875em;padding:13.92px 17.4px;min-width:191px;">
                  <strong>MODELO:</strong> {{ lastProduct.modelo || '-' }}
                </div>
              </div>
            </div>

            <div class="botoes-de-atalho">
              <span><b>F1</b> - Produto</span>
              <span><b>F2</b> - Cliente</span>
              <span><b>F3</b> - Cancelar</span>
              <span><b>F4</b> - Quantidade</span>
              <span><b>F5</b> - Excluir</span>
              <span><b>F6</b> - Finalizar</span>
              <span><b>F7</b> - Zoom tela</span>
              <span><b>F8</b> - Alterar</span>
              <span><b>F9</b> - Trocar Usuário</span>
              <span><b>F10</b> - Lançar valor</span>
              <span><b>ESC</b> - Sair</span>
            </div>
          </div>

          <div class="pos-products-card" style="flex:2;min-height:600px;max-height:600px;background:#fff;padding:16px;min-width:340px;display:flex;flex-direction:column;position:relative;">
            @if (products.length) {
              <div style="display:flex;flex-direction:column;height:100%;">
     
                <div style="display:flex;align-items:center;margin-bottom:8px;padding-bottom:8px;font-weight:bold;color:#1976d2;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:2;background:#fff;">
                  <span style="width:80px;text-align:center;display:inline-block;">ID</span>
                  <span style="width:200px;text-align:center;display:inline-block;position:relative;left:-12px;">PRODUTO</span>
                  <span style="width:120px;text-align:center;display:inline-block;position:relative;left:-12px;">PREÇO</span>
                  <span style="width:100px;text-align:left;display:inline-block;position:relative;left:48px;">QTD</span>
                  <span style="width:140px;text-align:center;display:inline-block;">TOTAL</span>
                </div>

                
                <div style="overflow-y:auto;max-height:340px;display:flex;flex-direction:column;">
                  @for (p of products; track p.id) {
                    <div style="display:flex;align-items:center;margin-bottom:18px;padding-bottom:8px;">
                      <span style="width:80px;font-weight:bold;text-align:center;display:inline-block;">{{ p.id }}</span>
                      <span style="width:200px;text-align:center;display:inline-block;">{{ p.nome }}</span>
                      <span style="width:120px;text-align:center;display:inline-block;">R$ {{ p.valorVenda != null ? p.valorVenda.toFixed(2) : '-' }}</span>
                      <span style="width:32px;text-align:center;font-weight:bold;display:inline-block;">x</span>
                      <span style="width:100px;text-align:left;display:inline-block;position:relative;left:48px;">{{ p.quantidade }}</span>
                      <span style="width:140px;text-align:center;display:inline-block;">R$ {{ p.valorVenda != null ? (p.valorVenda * p.quantidade).toFixed(2) : '-' }}</span>
                    </div>
                  }
                </div>

                
                <div style="display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;margin-top:auto;gap:32px;background:#fff;padding:24px 32px 24px 32px;position:absolute;left:0;right:0;bottom:0;">
                  <div class="pos-actions">
                    <button (click)="finalizarVenda()">Finalizar Venda</button>
                    <button (click)="cancelar()">Cancelar</button>
                  </div>
                  <div style="display:flex;flex-direction:column;align-items:flex-end;">
                    <div style="font-size:1.2em;font-weight:bold;">Itens: {{ products.length }}</div>
                    <div style="font-size:1.2em;font-weight:bold;">Total: R$ {{ total.toFixed(2) }}</div>
                    <div style="margin-top:8px;">
                      Valor recebido:
                      <input type="number" min="0" class="pos-input" [(ngModel)]="valorRecebido" placeholder="Valor recebido" style="width:120px;" />
                    </div>
                    <div style="margin-top:8px;font-size:1.25em;">
                      Troco: <span style="font-weight:bold;color:#2e7d32;">R$ {{ (valorRecebido - total) > 0 ? (valorRecebido - total).toFixed(2) : '0.00' }}</span>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }
    } -->


 
  <div class="pos-container">
   <div>
      <app-pesquisa-de-produtos (produtoAdicionado)="onProdutoAdicionado($event)"></app-pesquisa-de-produtos>
    </div>
   <div class="pos-container-grid">
    <app-checkout-display [lastProduct]="lastProduct"></app-checkout-display>
    <app-lista-produtos ></app-lista-produtos>
   </div> 
    
   
  </div>
